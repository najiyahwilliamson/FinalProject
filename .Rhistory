grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration and Conjuring",
TRUE ~ "Other"
))
unique(data$Spell.Name[data$Spell.Category == "Other"])
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration and Conjuring",
TRUE ~ "Other"
))
unique(data$Spell.Name[data$Spell.Category == "Other"])
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell|dissendium|Human Presence Revealing Spell|lumos|protego maxima|protego totalum|Repello Inimicum", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration and Conjuring",
TRUE ~ "Other"
))
unique(data$Spell.Name[data$Spell.Category == "Other"])
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
kable(freq_cat, caption = "Frequency of Spell Categories") #Formatting to make a table in HTML report
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Transfiguration", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Transfiguration and Conjuring", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Transfiguration/Conjuring", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Transfiguration&Conjuring", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Transfiguration and Conjuring", "Curse", "Jinx", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Curse", "Jinx","Transfiguration and Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Curse", "Jinx","Transfiguration\n and Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Curse", "Jinx","Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell|dissendium|Human Presence Revealing Spell|lumos|protego maxima|protego totalum|Repello Inimicum", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration\nand Conjuring",
TRUE ~ "Other"
))
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
kable(freq_cat, caption = "Frequency of Spell Categories") #Formatting to make a table in HTML report
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category, levels = c("Charm", "Healing", "Curse", "Jinx","Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(title = "Spells by Category",
x = "Category",
y = "Count") +
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = "Category",
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = NULL,
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal()
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = NULL,
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal() +
theme(axis.text.x = element_blank(),   # remove x-axis tick labels
axis.ticks.x = element_blank()) # remove little ticks too
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell|dissendium|Human Presence Revealing Spell|lumos|protego maxima|protego totalum|Repello Inimicum", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration\nand Conjuring",
TRUE ~ "Other"
)) %>%
distinct(Spell.Name, .keep_all + TRUE) # keeps only one row per spell
#Frequency of categories
freq_cat <- freq_cat %>%
mutate(Spell.Category = factor(Spell.Category,
levels = c("Charms", "Healing", "Curses", "Jinx",
"Transfiguration\nand Conjuring", "Other")))
# Create and center the table
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
library(kableEXTRA)
install.packages("kableEXTRA")
yes
install.packages("kableExtra")
library(kableEXTRA)
library(kableExtra)
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell|dissendium|Human Presence Revealing Spell|lumos|protego maxima|protego totalum|Repello Inimicum", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell",
Spell.Name, ignore.case = TRUE) ~ "Transfiguration\nand Conjuring",
TRUE ~ "Other"
))
#Frequency of categories
freq_cat <- freq_cat %>%
mutate(Spell.Category = factor(Spell.Category,
levels = c("Charms", "Healing", "Curses", "Jinx",
"Transfiguration\nand Conjuring", "Other")))
# Create and center the table
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
kable(freq_cat, caption = "Frequency of Spell Categories") #Formatting to make a table in HTML report
# Rename column
freq_cat <- freq_cat %>%
rename("Spell Category" = Spell.Category)
kable(freq_cat, caption = "Frequency of Spell Categories") #Formatting to make a table in HTML report
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = NULL,
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal() +
theme(axis.text.x = element_blank(),   # remove x-axis tick labels
axis.ticks.x = element_blank()) # remove little ticks too
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell Category,
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
```{r}
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = NULL,
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal() +
theme(axis.text.x = element_blank(),   # remove x-axis tick labels
axis.ticks.x = element_blank()) # remove little ticks too
# Summarize counts by new group
freq_grouped <- freq_cat %>%
group_by(Category_Group) %>%
summarise(n = sum(n))
# Reclassify categories
freq_cat <- freq_cat %>%
mutate(Category_Group = case_when(
Spell.Category %in% c("Charm", "Healing") ~ "Non-Dark Magic",
Spell.Category %in% c("Curse", "Jinx") ~ "Dark Magic",
Spell.Category %in% c("Transfiguration\nand Conjuring", "Other") ~ "Other"
))
# Summarize counts by new group
freq_grouped <- freq_cat %>%
group_by(Category_Group) %>%
summarise(n = sum(n))
# Plot
ggplot(freq_grouped, aes(x = Category_Group, y = n, fill = Category_Group)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Grouped Category",
x = NULL,
y = "Count",
fill = "Group") +
theme_minimal() +
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
# Plot
ggplot(freq_grouped, aes(x = Category_Group, y = n, fill = Category_Group)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Grouped Category",
x = NULL,
y = "Count",
fill = "Broader Spell Type") +
theme_minimal() +
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
# Plot
ggplot(freq_grouped, aes(x = Category_Group, y = n, fill = Category_Group)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Broader Type",
x = NULL,
y = "Count",
fill = "Broader Spell Type") +
theme_minimal() +
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
# Summarize counts by new group
freq_grouped <- freq_cat %>%
group_by(Category_Group) %>%
summarise(n = sum(n))
freq_grouped
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
freq_cat %>% filter(Spell.Category == "Healing")
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
freq_cat$Spell.Category <- as.character(freq_cat$Spell.Category)
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
# All categories in desired order
all_categories <- c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")
# Complete missing categories (if any) and reorder
freq_cat <- freq_cat %>%
complete(Spell.Category = all_categories, fill = list(n = 0)) %>%
arrange(match(Spell.Category, all_categories))
#Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
library(tidyverse)
# Step 1: Make sure your Spell.Category is a factor with all desired levels
data$Spell.Category <- factor(data$Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other"))
# Step 2: Summarize counts for each category
freq_cat <- data %>%
group_by(Spell.Category) %>%
summarise(n = n(), .groups = 'drop')
# Step 3: Ensure all factor levels are represented, even if zero
# (optional if some categories have no spells)
all_levels <- data.frame(Spell.Category = levels(data$Spell.Category))
freq_cat <- full_join(all_levels, freq_cat, by = "Spell.Category") %>%
mutate(n = ifelse(is.na(n), 0, n))
# Step 4: Render table in HTML safely
kable(freq_cat,
caption = "Frequency of Spell Categories",
align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
# All categories in desired order
all_categories <- c("Charm", "Healing", "Curse", "Jinx", "Other",
"Transfiguration\nand Conjuring")
#Bar plot of categories
ggplot(freq_cat,
aes(x = factor(Spell.Category,
levels = c("Charm", "Healing", "Curse", "Jinx",
"Transfiguration\nand Conjuring", "Other")),
y = n, fill = Spell.Category)) +
geom_bar(stat = "identity") +
labs(title = "Spells by Category",
x = NULL,
y = "Count",
fill = "Category") +   # <-- Legend label
theme_minimal() +
theme(axis.text.x = element_blank(),   # remove x-axis tick labels
axis.ticks.x = element_blank()) # remove little ticks too
#Contingency table
contingency_table <- table(data$Spell.Category, data$Light.Color)
# Keep only complete cases for the two columns
data_complete <- data %>%
filter(!is.na(Spell.Category) & !is.na(Light.Color))
#Contingency table
contingency_table <- table(data$Spell.Category, data$Light)
# Display table nicely in HTML
kable(contingency_table, caption = "Contingency Table of Spell Type vs Light Color") %>%
kable_styling(position = "center", full_width = FALSE)
#Proportions (row)
prop_table <- prop.table(contingency_table, margin = 1)
#Chi-squared test
chi_test <- chisq.test(contingency_table)
chi_test
prop_table
here::i_am(
"code/01_make_output.R"
)
library(knitr)
opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
here::i_am("Harry Potter/FinalProjectSpells.Rmd")
here::i_am(
"code/01_make_output1.R"
)
source("code/01_make_output1.R")
# Read in your data (adjust path if needed)
data <- read_csv(here("Spells.csv"))
absolute_path_to_data <- here::here("Spells.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
print(data)
here::i_am("code/01_make_output1.R")
absolute_path_to_data <- here::here("Spells.csv")
data <- read.csv(absolute_path_to_data, header = TRUE)
# Load required libraries
library(dplyr)
library(tidyr)
library(here)
library(readr)
# Categorize spells
data <- data %>%
mutate(Spell.Category = case_when(
grepl("charm|water-making spell|locking spell|general counter-spell|fire-making spell|dissendium|Human Presence Revealing Spell|lumos|protego maxima|protego totalum|Repello Inimicum", Spell.Name, ignore.case = TRUE) ~ "Charm",
grepl("curse|sectumsempra", Spell.Name, ignore.case = TRUE) ~ "Curse",
grepl("jinx|levicorpus|stunning spell", Spell.Name, ignore.case = TRUE) ~ "Jinx",
grepl("episkey|brackium emendo", Spell.Name, ignore.case = TRUE) ~ "Healing",
grepl("piertotum locomotor|snake summons spell|vera verto|incarcerous spell", Spell.Name, ignore.case = TRUE) ~ "Transfiguration\nand Conjuring",
TRUE ~ "Other"
))
# Frequency of categories
freq_cat <- data %>%
count(Spell.Category, sort = TRUE)
# Ensure Spell.Category is character
freq_cat$Spell.Category <- as.character(freq_cat$Spell.Category)
# Define all categories in desired order
all_categories <- c("Charm", "Healing", "Curse", "Jinx", "Other", "Transfiguration\nand Conjuring")
# Complete missing categories and reorder
freq_cat <- freq_cat %>%
complete(Spell.Category = all_categories, fill = list(n = 0)) %>%
arrange(match(Spell.Category, all_categories))
# Save output
saveRDS(
freq_cat,
file = here("output", "freq_cat.rds")
)
#TO DO: Load in freq_cat
freq_cat <- readRDS(
here::here("output/freq_cat.rds")
)
#TO DO: Create table of freq_cat
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
#TO DO: Load in freq_cat
freq_cat <- readRDS(
here::here("output/freq_cat.rds")
)
#TO DO: Create table of freq_cat
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE) #Formatting to make a table in HTML report
#TO DO: Load in freq_cat
freq_cat <- readRDS(
here::here("output/freq_cat.rds")
)
#TO DO: Create table of freq_cat
readRDS(
here::here("output/freq_cat_table.html")
)
# Create the formatted table
table_html <- kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
library(kableExtra)
# Create the formatted table
table_html <- kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>%
kable_styling(position = "center", full_width = FALSE)
# Save the HTML table to a file
writeLines(as.character(table_html), here("output", "freq_cat_table.html"))
includeHTML(here::here("output", "freq_cat_table.html"))
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>% kable_styling(position = "center", full_width = FALSE)
# Read in your data
freq_cat <- here::here("output", "freq_cat.csv")
# Read in your data
absolute_path_to_data <- here::here("output", "freq_cat.csv")
freq_cat <- read.csv(absolute_path_to_data, header = TRUE)
# Read in your data
absolute_path_to_data <- here::here("output", "freq_cat.rds")
freq_cat <- read.csv(absolute_path_to_data, header = TRUE)
# Read in your data
absolute_path_to_data <- here::here("output", "freq_cat.rds")
freq_cat <- readRDS(absolute_path_to_data)
knitr::include_graphics(here::here("output", "spell_plot.png"))
knitr::include_graphics(here::here("output", "grouped_spell_plot.png"))
knitr::include_graphics(here::here("output", "grouped_spell_plot.png"))
knitr::include_graphics(here::here("output", "grouped_spell_plot.png"))
knitr::include_graphics(here::here("output", "grouped_spell_plot.png"))
cat(readLines(here::here("output", "color_summary_table.html")), sep = "\n")
file.exists("output/freq_cat.rds")
#TO DO: Load in freq_cat
freq_cat <- readRDS(here::here("output", "freq_cat.rds"))
readRDS("output/freq_cat.rds")
library(knitr)
library(here)
library(dplyr)
library(kableExtra)
opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
freq_cat <- readRDS(here::here("output", "freq_cat.rds"))
kable(freq_cat, caption = "Frequency of Spell Categories", align = "c") %>% kable_styling(position = "center", full_width = FALSE)
here::i_am(
"code/05_render_report.R"
)
rmarkdown::render(
here::here("FinalProjectSpells.Rmd")
)
file.create(".gitignore")
# Ignore everything
*
